using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.Caching;
using NUSMed_WebApp.Classes.BLL;
using NUSMed_WebApp.Classes.Entity;
using System.IO;

namespace NUSMed_WebApp
{
    public partial class About : Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            Master.LiActiveAbout();

            string magnitude = " 1.000000000000000000e+00,7.735849022865295410e-01,5.849056839942932129e-01,3.301886916160583496e-01,1.037735864520072937e-01,6.603773683309555054e-02,1.320754736661911011e-01,1.650943458080291748e-01,1.650943458080291748e-01,1.698113232851028442e-01,1.839622706174850464e-01,1.839622706174850464e-01,2.028301954269409180e-01,2.075471729040145874e-01,2.028301954269409180e-01,2.122641503810882568e-01,2.405660450458526611e-01,2.452830225229263306e-01,2.594339549541473389e-01,2.830188572406768799e-01,3.160377442836761475e-01,3.207547068595886230e-01,3.537735939025878906e-01,3.679245412349700928e-01,4.009433984756469727e-01,4.292452931404113770e-01,4.481132030487060547e-01,4.622641503810882568e-01,5.047169923782348633e-01,5.330188870429992676e-01,5.518867969512939453e-01,5.849056839942932129e-01,5.660377144813537598e-01,5.000000000000000000e-01,4.622641503810882568e-01,3.915094435214996338e-01,3.396226465702056885e-01,2.830188572406768799e-01,2.830188572406768799e-01,2.452830225229263306e-01,2.594339549541473389e-01,2.500000000000000000e-01,2.405660450458526611e-01,2.358490526676177979e-01,2.358490526676177979e-01,2.264150977134704590e-01,2.358490526676177979e-01,2.358490526676177979e-01,2.452830225229263306e-01,2.405660450458526611e-01,2.594339549541473389e-01,2.358490526676177979e-01,2.452830225229263306e-01,2.452830225229263306e-01,2.358490526676177979e-01,2.311320751905441284e-01,2.122641503810882568e-01,2.169811278581619263e-01,2.169811278581619263e-01,2.075471729040145874e-01,2.122641503810882568e-01,1.886792480945587158e-01,1.981132030487060547e-01,2.028301954269409180e-01,2.028301954269409180e-01,1.933962255716323853e-01,2.122641503810882568e-01,2.216981202363967896e-01,2.169811278581619263e-01,2.264150977134704590e-01,2.500000000000000000e-01,2.641509473323822021e-01,2.500000000000000000e-01,2.405660450458526611e-01,2.264150977134704590e-01,2.028301954269409180e-01,2.028301954269409180e-01,1.839622706174850464e-01,1.650943458080291748e-01,1.462264209985733032e-01,1.509433984756469727e-01,1.509433984756469727e-01,1.415094286203384399e-01,1.367924511432647705e-01,1.509433984756469727e-01,1.179245263338088989e-01,1.273584961891174316e-01,1.179245263338088989e-01,1.320754736661911011e-01,1.273584961891174316e-01,1.415094286203384399e-01,1.226415112614631653e-01,1.509433984756469727e-01,1.745283007621765137e-01,2.264150977134704590e-01,3.679245412349700928e-01,5.424528121948242188e-01,4.811320900917053223e-01,2.311320751905441284e-01,3.537735939025878906e-01,7.783018946647644043e-01,9.716981053352355957e-01,7.358490824699401855e-01,4.905660450458526611e-01,3.207547068595886230e-01,8.490566164255142212e-02,0.000000000000000000e+00,5.188679322600364685e-02,9.905660152435302734e-02,1.037735864520072937e-01,8.490566164255142212e-02,8.962263911962509155e-02,8.962263911962509155e-02,1.037735864520072937e-01,1.273584961891174316e-01,1.226415112614631653e-01,1.603773534297943115e-01,1.603773534297943115e-01,1.981132030487060547e-01,2.358490526676177979e-01,2.735849022865295410e-01,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00,0.000000000000000000e+00 ";

            string[] s = magnitude.Split(',');
            List<string> timeList = new List<string>();

            double timeBuffer = 0;
            foreach (string value in s)
            {
                timeList.Add(timeBuffer.ToString());
                timeBuffer += 0.008;
            }

            string time = string.Join(", ", timeList.ToArray());

            ScriptManager.RegisterStartupScript(this, GetType(), "Update Timeseries", @"
                var layout = {
                    title: 'ECG Heartbeat',
                yaxis: {
                    title: 'Magnitude',
                    autotick: true,
                    ticks: 'outside',
                  },
                  xaxis: {
                    title: 'Time (seconds)',
                    autotick: false,
                    ticks: 'outside',
                    dtick: 0.016,
                  },
                };

                var trace1 = {
                        type: 'scatter',
                        mode: 'lines',
                        name: 'ECG',
                        y: [" + magnitude + @"],
                        x: [" + time + @"],
                        line: { color: '#17BECF' }
                }
                Plotly.newPlot('DivTimeSeries', [trace1], layout);
            ", true);

        }

    }
}
